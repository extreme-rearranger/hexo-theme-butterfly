.note
  $note-icons = hexo-config('note.icons')
  position: relative
  margin-bottom: 1.25em  // original: margin: 0 0 20px
  padding: 1em  // original: 15px

  if hexo-config('note.border_radius') is a 'unit'
    border-radius: unit(hexo-config('note.border_radius'), px)

  &.icon-padding
    padding-left: 3em

  & > .note-icon
    position: absolute
    top: calc(50% - .5em)
    left: .8em
    font-size: larger

  for $type in $color-types
    &.{$type}
      &:not(.disabled)
        border-left-color: lookup('$tagsP-' + $type + '-color') !important
        +darkmode()
          border-left-color: lookup('$tagsP-' + $type + '-color-dark') !important

        &.modern
          border-left-color: transparent !important
          color: lookup('$tagsP-' + $type + '-color')
          +darkmode()
            color: lookup('$tagsP-' + $type + '-color-dark')

        &:not(.simple)
          background: lighten(lookup('$tagsP-' + $type + '-color'), 85%) !important
          +darkmode()
            background: tint(lookup('$tagsP-' + $type + '-color-dark'), 70%) !important

      & > .note-icon
        color: lookup('$tagsP-' + $type + '-color')
        +darkmode()
          color: lookup('$tagsP-' + $type + '-color-dark')

  &.simple
    border: 1px solid #EEEEEE
    border-left-width: 5px
    +darkmode()
      border-color: darken_and_shade(#EEEEEE, $darken-amount, $shade-amount)

  &.modern
    border: 1px solid transparent !important
    background-color: #f5f5f5
    color: #4C4948
    +darkmode()
      background-color: darken_and_shade(#f5f5f5, $darken-amount, $shade-amount)
      color: darken_and_shade(#4C4948, $darken-amount, $shade-amount)


  &.flat
    border: initial
    border-left: 5px solid #EEEEEE
    background-color: lighten(#EEEEEE, 65%)
    color: #4C4948
    +darkmode()
      border-left-color: darken_and_shade(#EEEEEE, $darken-amount, $shade-amount)
      background-color: darken_and_shade(lighten(#EEEEEE, 65%), $darken-amount, $shade-amount)
      color: darken_and_shade(#4C4948, $darken-amount, $shade-amount)

  h2,
  h3,
  h4,
  h5,
  h6
    if $note-icons
      margin-top: 3px
    else
      margin-top: 0

    margin-bottom: 0
    padding-top: 0 !important
    border-bottom: initial

  p,
  ul,
  ol,
  table,
  pre,
  blockquote,
  img
    &:first-child
      margin-top: 0 !important

    &:last-child
      margin-bottom: 0 !important

  .img-alt
    margin: 5px 0 10px

  if $note-icons
    &:not(.no-icon)
      padding-left: 3em

      &::before
        position: absolute
        top: calc(50% - .7em)  // original: calc(50% - .95em)
        left: .8em
        font-size: larger
        @extend .fontawesomeIcon

  for $type in $note-types
    &.{$type}
      &.flat
        background: lookup('$note-' + $type + '-bg')
        +darkmode()
          background: lookup('$note-' + $type + '-bg-dark')

      &.modern
        border-color: lookup('$note-modern-' + $type + '-border')
        background: lookup('$note-modern-' + $type + '-bg')
        color: lookup('$note-modern-' + $type + '-text')
        +darkmode()
          border-color: lookup('$note-modern-' + $type + '-border-dark')
          background: lookup('$note-modern-' + $type + '-bg-dark')
          color: lookup('$note-modern-' + $type + '-text-dark')

        a
          &:not(.btn)
            color: lookup('$note-modern-' + $type + '-text')
            +darkmode()
              color: lookup('$note-modern-' + $type + '-text-dark')

            &:hover
              color: lookup('$note-modern-' + $type + '-hover')
              +darkmode()
                color: lookup('$note-modern-' + $type + '-hover-dark')

      &:not(.modern)
        border-left-color: lookup('$note-' + $type + '-border')
        +darkmode()
          border-left-color: lookup('$note-' + $type + '-border-dark')

        h2,
        h3,
        h4,
        h5,
        h6
          color: lookup('$note-' + $type + '-text')

      if $note-icons
        &:not(.no-icon)
          &::before
            content: lookup('$note-' + $type + '-icon')

          &:not(.modern)
            &::before
              color: lookup('$note-' + $type + '-text')
              +darkmode()
                color: lookup('$note-' + $type + '-text-dark')
